- name: install phpmyadmin
  hosts: all
  tasks:
  
    - name: add repository for php 7.3
      yum:
        state: present
        name: https://rpms.remirepo.net/enterprise/remi-release-7.rpm

    - name: install php packages
      yum:
        state: present
        enablerepo: remi-php73
        name:
          - php
          - php-common
          - php-mcrypt
          - php-cli
          - php-gd
          - php-curl
          - php-mysqlnd
          - phpmyadmin
          
    - name: install apache
      yum:
        state: present
        name:
          - httpd
          - libsemanage-python  
        
    - name: conf file
    
    - name: Enable and start Apache
      systemd:
        name: httpd
        state: started
        enabled: true
    
    - name: Open port 80
      firewalld:
        service: http
        permanent: true
        state: enabled
        immediate: yes
    
    - name: Open port 443
      firewalld:
        service: https
        permanent: true
        state: enabled
        immediate: yes
    
    - name: Set SELinux boolean for Apache
      seboolean:
        name: httpd_can_network_connect
        state: yes
        persistent: yes
